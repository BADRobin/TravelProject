<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="/css/bulma.min.css">
    <link rel="stylesheet" href="/css/main.css">

    <title>Travel Blog</title>
</head>
<body>
<header th:replace="~{fragments/header.html :: header}"></header>

<section class="section">
    <div class="container">
        <!-- Location Header -->
        <div class="content has-text-centered">
            <!-- Importing names of City and Country for Header -->
            <h1 class="title" th:text="${detailData.cityName} + ', ' + ${detailData.countryName}">City, Country</h1>
            <p class="subtitle">
                <span class="icon"><i class="fas fa-calendar-alt"></i></span>
                <!-- Importing dates for Header -->
                from <strong th:text="${detailData.startDate}">Start Date</strong> to <strong th:text="${detailData.endDate}">End Date</strong>
            </p>
        </div>

        <!-- Image Gallery -->
        <div class="columns is-centered">
            <div class="column is-half">
                <div class="card">
                    <div class="card-image">
                        <div class="image-gallery">
                            <!-- Importing Image Gallery -->
                            <figure class="image is-16by9" th:each="url : ${detailData.photos}">
                                <img th:src="${url.photoPath}" alt="Gallery Image">
                            </figure>
                        </div>
                    </div>
                    <footer class="card-footer">
                        <a href="#" class="card-footer-item">❮ Prev</a>
                        <a href="#" class="card-footer-item">Next ❯</a>
                    </footer>
                </div>
            </div>
        </div>

        <!-- Map -->
        <div class="content has-text-centered">
            <div id="map" style="width: 100%; height: 450px; margin: auto;"></div>
        </div>

        <!-- Leaflet.js Script -->
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                // Importing latitude and longitude
                const latitude = /*[[${detailData.latitude}]]*/ 52.5200; // Replace with dynamic Thymeleaf value
                const longitude = /*[[${detailData.longitude}]]*/ 13.4050; // Replace with dynamic Thymeleaf value

                // Initialize the map
                const map = L.map('map').setView([latitude, longitude], 13);

                // Add OpenStreetMap tiles
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                    attribution: '© OpenStreetMap contributors'
                }).addTo(map);

                // Add a marker at the specified coordinates
                L.marker([latitude, longitude]).addTo(map)
                    .bindPopup('Location: ' + latitude + ', ' + longitude)
                    .openPopup();
            });
        </script>

        <!-- Description -->
        <div class="content">
            <!-- Importing Description -->
            <p th:text="${detailData.description}">Description here</p>
        </div>

        <!-- Weather Section -->
        <div class="box has-text-centered">
            <h2 class="title is-4">Current Weather</h2>
            <p class="subtitle is-6">
                <span class="icon"><i class="fas fa-cloud"></i></span> 40°C
            </p>
            <p class="subtitle is-6">5 Day Forecast</p>
            <p>Day 1: Sunny<br>Day 2: Cloudy<br>Day 3: Rainy</p>
        </div>
    </div>
</section>

<!-- Include Leaflet.js -->
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

</body>
</html>
